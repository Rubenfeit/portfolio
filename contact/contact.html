

<!doctype html>
<html lang="en">
    <head>
        <!-- Required meta tags --> 
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <!-- Bootstrap CSS -->
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
        <script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/ilbs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
        <script src="../api/jquery.easypiechart.js"></script>
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>
        <link rel="stylesheet" href="../css/style.css">
        <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.1.0/css/all.css" integrity="sha384-lKuwvrZot6UHsBSfcMvOkWwlCMgc0TaWr+30HWe3a4ltaBwTZhyTEggF5tJv8tbt" crossorigin="anonymous">
        <title>Portfolio Ruben Feiteira</title>
        <style>
            html, body {padding:0; margin:0; height:100%;}
            footer{position: absolute; bottom: 0; left: 0; right: 0;}
        </style>

    </head>
   <body>
      
       <header>  
           <nav class="navbar navbar-expand-md navbar-dark bg-dark">
               <a class="navbar-brand" href="../Index.php">Accueil</a>
               <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarColor01" aria-controls="navbarColor01" aria-expanded="false" aria-label="Toggle navigation">
                   <span class="navbar-toggler-icon"></span>
               </button>
               <div class="collapse navbar-collapse justify-content-center" id="navbarColor01">
                   <ul class="navbar-nav"> 
                       <li class="nav-item mx-3">
                           <a class="nav-link" href="../experiences/experiences.html">Mon Parcours</a>
                       </li>
                       <li class="nav-item dropdown">
                           <a class="nav-link dropdown-toggle" id="dropdown1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Mes compétences</a>
                           <ul class="dropdown-menu bg-dark" aria-labelledby="dropdown1">
                               <li class="dropdown-item dropdown ">
                                   <a class="dropdown-toggle text-white " id="dropdown1-1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">Compétences Téchniques</a>
                                   <ul class="dropdown-menu bg-dark" aria-labelledby="dropdown1-1">
                                       <li class="dropdown-item text-white"><a href="../skills/technicalSkills.html?id=&frontend">Front-End</a></li>
                                       <li class="dropdown-item text-white"><a href="../skills/technicalSkills.html?id=&backend">Back-End</a></li>
                                       <li class="dropdown-item text-white"><a href="../skills/technicalSkills.html?id=&basesdedonnes">Bases de Données</a></li>
                                       <li class="dropdown-item text-white"><a href="../skills/technicalSkills.html?id=&frameworks">Frameworks Base de Données</a></li>
                                       <li class="dropdown-item text-white"><a href="../skills/technicalSkills.html?id=&web">Web Technologies</a></li>
                                       <li class="dropdown-item text-white"><a href="../skills/technicalSkills.html?id=&mobile">Mobile Technologies</a></li>
                                       <li class="dropdown-item text-white"><a href="../skills/technicalSkills.html?id=&Uml">UML</a></li>
                                       <li class="dropdown-item text-white"><a href="../skills/technicalSkills.html?id=&autres">Autres Valences</a></li>
                                   </ul>
                               </li>
                               <li class="dropdown-item dropdown ">
                                   <a class="dropdown-toggle text-white " id="dropdown1-1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">Compétences Professionnelles </a>
                                   <ul class="dropdown-menu bg-dark" aria-labelledby="dropdown1-1">
                                        <li class="dropdown-item text-white"><a href="../skills/profissionalSkils.html?id=&analyser">Analyser</a></li>
                                        <li class="dropdown-item text-white"><a href="../skills/profissionalSkils.html?id=&conception">Conception</a></li>
                                        <li class="dropdown-item text-white"><a href="../skills/profissionalSkils.html?id=&developpement">Développement</a></li>
                                        <li class="dropdown-item text-white"><a href="../skills/profissionalSkils.html?id=&gestionDeProjet">Gestion de projet</a></li> 
                                   </ul>
                               </li>
                               <li class="dropdown-item dropdown ">
                                   <a class="dropdown-toggle text-white " id="dropdown1-1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">Compétences Humaines</a>
                                   <ul class="dropdown-menu bg-dark" aria-labelledby="dropdown1-1">
                                        <li class="dropdown-item text-white"><a href="../skills/HumanSkills.html?id=&Autonomie">Autonomie</a></li>
                                        <li class="dropdown-item text-white"><a href="../skills/HumanSkills.html?id=&Curieux">Curiosité</a></li>
                                        <li class="dropdown-item text-white"><a href="../skills/HumanSkills.html?id=&Perspicace">Perspicace</a></li>
                                        <li class="dropdown-item text-white"><a href="../skills/HumanSkills.html?id=&Communication">Communication</a></li>
                                        <li class="dropdown-item text-white"><a href="../skills/HumanSkills.html?id=&Diplomatie">Diplomatie</a></li>
                                        <li class="dropdown-item text-white"><a href="../skills/HumanSkills.html?id=&Organisation">Organisation</a></li>
                                        <li class="dropdown-item text-white"><a href="../skills/HumanSkills.html?id=&Rigueur">Rigueur</a></li>
                                        <li class="dropdown-item text-white"><a href="../skills/HumanSkills.html?id=&TravailEnEquipe">Travail en équipe</a></li>
                                        <li class="dropdown-item text-white"><a href="../skills/HumanSkills.html?id=&Creativite">Créativité</a></li>
                                        <li class="dropdown-item text-white"><a href="../skills/HumanSkills.html?id=&Engagement">Engagement</a></li>
                                   </ul>
                               </li>
                           </ul>
                       </li>
                       <li class="nav-item dropdown  mx-3">
                           <a class="nav-link dropdown-toggle" id="dropdown1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Mes réalisations</a> 
                           <ul class="dropdown-menu bg-dark" aria-labelledby="dropdown1">
                               <li class="dropdown-item dropdown ">
                                   <a class="dropdown-toggle text-white " id="dropdown1-1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">Web</a>
                                   <ul class="dropdown-menu bg-dark" aria-labelledby="dropdown1-1">
                                       <li class="dropdown-item text-white"><a href="../projects/GestionEleves.html">Site web Gestion d'eleves(Php)</a></li>
                                       <li class="dropdown-item text-white"><a href="../projects/Secuserve.html">Plateforme Secuserve(Php)</a></li>
                                       <li class="dropdown-item text-white"><a href="../projects/Petanque.html">Site web Jeu Pétanque(Php)</a></li>
                                       <li class="dropdown-item text-white"><a href="../projects/Planner.html">GFI Planner(c#)</a></li>
                                       <li class="dropdown-item text-white"><a href="../projects/Timesheet.html">GFI TimeSheet(c#)</a></li>
                                   </ul>
                               </li>
                               <li class="dropdown-item dropdown ">
                                   <a class="dropdown-toggle text-white " id="dropdown1-1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">Mobile </a>
                                   <ul class="dropdown-menu bg-dark" aria-labelledby="dropdown1-1">
                                       <li class="dropdown-item text-white"><a href="../projects/Android.html">Apllication Mobile(Android)</a></li>
                                   </ul>
                               </li>                        
                               <li class="dropdown-item dropdown ">
                                   <a class="dropdown-toggle text-white " id="dropdown1-1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">Client Lourd</a>
                                   <ul class="dropdown-menu bg-dark" aria-labelledby="dropdown1-1">
                                       <li class="dropdown-item text-white"><a href="../projects/JavaBanque.html">La Banque(Java)</a></li>
                                   </ul>
                               </li>
                           </ul>
                       </li>
                       <li class="nav-item active mx-3">
                           <a class="nav-link" href="../contact/contact.html"> Me Contacter <span class="sr-only">(current)</span></a>
                       </li>
                   </ul>
               </div>
           </nav>
        </header>   
       
       <div class="alert alert-success" role="alert" style="display:none;">
            <p id="messageSuccess">Votre email a été envoyé avec succès.</p>
        </div>
       
       <div class="alert alert-danger" role="alert" style="display:none;">
           <p id="messageError"></p>
       </div>
       
        <div class="alert alert-info" role="alert" style="display:none;">
           <p id="messageInfo"></p>
       </div>
 
       <div class="row justify-content-center col-lg-12 my-5" style="margin-top: 75px;">
           <div class="p-5 bg-white shadow-sm col-sm-7 ">
               <div>
                   <div class="card  rounded-0">
                       <div class="card-header p-0">
                           <div class="bg-info text-white text-center py-2">
                               <h3><i class="fa fa-envelope"></i> Contact</h3>
                           </div>
                       </div>
                           <div class="card-body p-3">
                               <div class="form-group">
                                   <div class="input-group mb-2">
                                       <div class="input-group-prepend">
                                           <div class="input-group-text"><i class="fa fa-user text-info"></i></div>
                                       </div>
                                       <input type="text" class="form-control" id="nombre" name="nombre" placeholder="Prenon et Nom" required>
                                   </div>
                               </div>
                               <div class="form-group">
                                   <div class="input-group mb-2">
                                       <div class="input-group-prepend">
                                           <div class="input-group-text"><i class="fa fa-envelope text-info"></i></div>
                                       </div>
                                       <input type="email" class="form-control" id="mail" name="email" placeholder="tonmail@gmail.com" required>
                                   </div>
                               </div>
                               <div class="form-group">
                                   <div class="input-group mb-2">
                                       <div class="input-group-prepend">
                                           <div class="input-group-text"><i class="fa fa-comment text-info"></i></div>
                                       </div>
                                       <textarea  class="form-control" id="message" name="message" placeholder="Envoie ton Message"  required></textarea>
                                   </div>
                               </div>
                               <div class="text-center">
                                   <input type="submit" value="Envoyer" id="sub" class="btn btn-info btn-block rounded-0 py-2">
                               </div>
                           </div>
                   </div>
               </div>
           </div>
       </div>
        
        <footer style="clear:both;">
            <div class="footer-copyright text-center py-3">© 2018 
                 Ruben Feiteira
            </div>
        </footer>
        <script type="text/javascript">
            $(document).ready(function () {
                $('.navbar .dropdown-item').on('mouseenter', function (e) {
                    var $el = $(this).children('.dropdown-toggle');
                    var $parent = $el.offsetParent(".dropdown-menu");
                    $(this).parent("li").toggleClass('open');

                    if (!$parent.parent().hasClass('navbar-nav')) {
                        if ($parent.hasClass('show')) {
                            $parent.removeClass('show');
                            $el.next().removeClass('show');
                            $el.next().css({"top": -999, "left": -999});
                        } else {
                            $parent.parent().find('.show').removeClass('show');
                            $parent.addClass('show');
                            $el.next().addClass('show');
                            $el.next().css({"top": $el[0].offsetTop, "left": $parent.outerWidth() - 4});
                        }
                        e.preventDefault();
                        e.stopPropagation();
                    }
                });

                $('.navbar .dropdown').on('hidden.bs.dropdown', function () {
                    $(this).find('li.dropdown').removeClass('show open');
                    $(this).find('ul.dropdown-menu').removeClass('show open');
                });
                
                function validateEmail(email) {
                    var emailReg = /^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$/;
                    return emailReg.test( email );
                }

                $("#sub").click(function () {
                    var errors=[];
                    var name = $("#nombre").val();
                    var email = $("#mail").val();
                    var message = $("#message").val();
                    
                    if(name == ""){
                        errors.push("Nom");
                    }
                    
                    if(email == ""){
                        errors.push("Email");
                    }
                    
                    if(message == ""){
                        errors.push("Message");
                    }
                    
                    if(errors.length > 0){
                        $('#messageError').html("Les champs sont tous de saisie obligatoire");
                        $('.alert-danger').slideDown();

                        setTimeout(function () {
                            $('.alert-danger').slideUp();
                        }, 4000);      
                        
                        return;
                    }
                    
                    if(!validateEmail(email)){
                        $('#messageError').html("L'email n'est pas au format correct");
                        $('.alert-danger').slideDown();

                        setTimeout(function () {
                            $('.alert-danger').slideUp();
                        }, 4000);                      
                       
                        return;
                    }
                    
                    if(message.length <30 ) {
                        $('#messageInfo').html("Le message doit être superior à 30 caractères");
                        $('.alert-info').slideDown();

                        setTimeout(function () {
                            $('.alert-info').slideUp();
                        }, 4000); 
                        
                        return;
                    }
                    
                    var dataString = {"name": name, "email": email, "message": message};
                    
                    console.log(dataString);

                    $.ajax({
                        type: "POST",
                        url: "mail.php",
                        data: dataString,
                    }).done((resp) => {
                        if(resp){
                            $('.alert-success').slideDown();

                            setTimeout(function () {
                                $('.alert-success').slideUp();
                            }, 4000);
                            return;
                        }
                        $('#messageError').html("Un problème a été trouvé et votre email n'a pas été envoyé, essayez ultérieurement");
                        $('.alert-danger').slideDown();

                        setTimeout(function () {
                            $('.alert-danger').slideUp();
                        }, 4000);                                              
                    });
                    return false;
                });
            });
        </script>
    </body>
</html>
